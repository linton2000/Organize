# Compose file for local testing purposes
services:
  # React App
  app:
    restart: unless-stopped
    build:
      context: ./app
      dockerfile: Containerfile
    ports:
      - 3000:3000
    environment:
      - HOST=${HOST}
      - CHOKIDAR_USEPOLLING=${CHOKIDAR_USEPOLLING}
      - WATCHPACK_POLLING=${WATCHPACK_POLLING}
      - WDS_SOCKET_PORT=${WDS_SOCKET_PORT}
    app:
      depends_on:
        - api

  # Django API
  api:
    restart: unless-stopped
    build:
      context: ./backend
      dockerfile: Containerfile
    ports:
      - 8000:8000
    environment:
      - SECRET_KEY=${SECRET_KEY}
      - PYTHONDONTWRITEBYTECODE=${PYTHONDONTWRITEBYTECODE}
      - PYTHONUNBUFFERED=${PYTHONUNBUFFERED}
      